<table id='others-info' class="table table-default">
  <thead>
    <th>Name</th>
    <th>Role</th>
    <th>Contact number</th>
    <th>Email</th>
    <th></th>
  </thead>
  <tbody>
    <%- presenter.related_parties.each do |other| %>
      <tr>
        <td><%= link_to other.involvable.name, other.involvable_type == 'Person' ? person_path(other.involvable) : organization_path(other.involvable) %></td>
        <td><%= other.role_label %></td>
        <td><%= other.involvable.phone %></td>
        <td><%= other.involvable.email %></td>
        <td><%= link_to 'Remove', case_involvement_path(other.case_file, other), method: :delete, data: {confirm: 'Are you sure?'}, class: 'btn btn-danger' if presenter.case_file.pending? %></td>
      </tr>
    <%- end %>
  </tbody>
</table>

<hr/>

<%- if presenter.case_file.pending? %>
  <div class='pull-right'>
    <%= link_to 'Add Person', new_case_involvement_path(presenter.case_file, involvement: { role: :others, involvable_type: 'Person' }), remote: true, class: 'btn btn-success' %>
    <%= link_to 'Add Organization', new_case_involvement_path(presenter.case_file, involvement: { role: :others, involvable_type: 'Organization' }), remote: true, class: 'btn btn-success' %>
  </div>
<%- end %>
